<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>the playce - Feedback Form</title>
  <link rel="stylesheet" href="/customer.css"/>
</head>

<body>
  <div class="container">
    <img src="/images/logo.jpeg" alt="Café Logo" class="logo">
    <h1>We’d Love Your Feedback!</h1>
    <h3>Help us make your next visit even better ☕💬</h3>

    <form id="feedbackForm">
      <label for="name">Name</label>
      <input type="text" id="name" name="name" placeholder="Your name" required />

      <label for="email">Email</label>
      <input type="email" id="email" name="email" placeholder="abc@gmail.com" required />

      <label for="rating">Rate your experience</label>
      <div class="stars">
        <input type="radio" id="star1" name="rating" value="1" />
        <label for="star1" title="1 stars">★</label>

        <input type="radio" id="star2" name="rating" value="2" />
        <label for="star2" title="2 stars">★</label>

        <input type="radio" id="star3" name="rating" value="3" />
        <label for="star3" title="3 stars">★</label>

        <input type="radio" id="star4" name="rating" value="4" />
        <label for="star4" title="4 stars">★</label>

        <input type="radio" id="star5" name="rating" value="5" />
        <label for="star5" title="5 star">★</label>
      </div>

      <label for="feedback">Your Feedback</label>
      <textarea id="feedback" name="feedback" placeholder="Share your thoughts..."></textarea>

      <p class="suggestion-label">What did you enjoy most?</p>
      <div class="suggestion-buttons">
        <button type="button">☕ Great Coffee</button>
        <button type="button">🍰 Fresh Desserts</button>
        <button type="button">😊 Friendly Staff</button>
        <button type="button">🎶 Lovely Music</button>
        <button type="button">🌿 Cozy Ambience</button>
        <button type="button">📖 Relaxing Vibe</button>
      </div>

      <div class="buttons">
        <input type="submit" value="Submit">
        <input type="reset" value="Reset">
      </div>
    </form>
  </div>

  <!-- ---------- Popup Modal ---------- -->
  <div id="popup" class="popup">
    <div class="popup-content">
      <h2>⚠️ Oops!</h2>
      <p>Please fill in all fields including your feedback message.</p>
      <button id="closePopup">Got it!</button>
    </div>
  </div>

  <script>
  // Toggle selected feedback buttons
  const buttons = document.querySelectorAll(".suggestion-buttons button");
  buttons.forEach(btn => {
    btn.addEventListener("click", () => {
      btn.classList.toggle("selected");
    });
  });

  // Form validation and popup
  const form = document.getElementById("feedbackForm");
  const popup = document.getElementById("popup");
  const closePopup = document.getElementById("closePopup");

  form.addEventListener("submit", (e) => {
    e.preventDefault();

    const name = document.getElementById("name").value.trim();
    const email = document.getElementById("email").value.trim();
    const feedback = document.getElementById("feedback").value.trim();
    const rating = document.querySelector('input[name="rating"]:checked');

    if (!name || !email || !feedback || !rating) {
      popup.style.display = "flex";
    } else {
      // ✅ Create a new feedback entry
      const newFeedback = {
        token: Date.now(), // unique token ID
        name,
        email,
        rating: parseInt(rating.value),
        feedback,
        date: new Date().toLocaleString()
      };

      // ✅ Save data in localStorage
      const feedbackList = JSON.parse(localStorage.getItem("feedbackList")) || [];
      feedbackList.push(newFeedback);
      localStorage.setItem("feedbackList", JSON.stringify(feedbackList));

      // ✅ Thank you popup
      const rewards = [
        "10% Off Your Next Latte ☕",
        "Free Cookie with Your Next Order 🍪",
        "Buy 1 Get 1 on Cappuccino 🥰",
        "Free Upgrade to Large Coffee 🎉"
      ];
      const randomReward = rewards[Math.floor(Math.random() * rewards.length)];

      popup.querySelector(".popup-content").innerHTML = `
        <h2>☕ Thank You!</h2>
        <p>Your feedback helps us brew happiness!<br><strong>${randomReward}</strong></p>
        <button id="closePopup">Close</button>`;
      popup.style.display = "flex";

      // Reset form after submission
      form.reset();
      buttons.forEach(btn => btn.classList.remove("selected"));
      popup.querySelector("#closePopup").addEventListener("click", () => popup.style.display = "none");
    }
  });

  closePopup.addEventListener("click", () => {
    popup.style.display = "none";
  });
</script>

</body>
</html>